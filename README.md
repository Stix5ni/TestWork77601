# WordPress Cities Weather Widget

–î–æ—á–µ—Ä–Ω—è—è —Ç–µ–º–∞ –¥–ª—è Storefront —Å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥–æ—Ä–æ–¥–∞–º–∏ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–≥–æ–¥—ã.

## –û–ø–∏—Å–∞–Ω–∏–µ

WordPress –ø–ª–∞–≥–∏–Ω-—Ç–µ–º–∞, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π:
- Custom Post Type "Cities" –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥–æ—Ä–æ–¥–∞–º–∏
- Custom Taxonomy "Countries" –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –ø–æ —Å—Ç—Ä–∞–Ω–∞–º
- –ú–µ—Ç–∞–±–æ–∫—Å –¥–ª—è –≤–≤–æ–¥–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (—à–∏—Ä–æ—Ç–∞/–¥–æ–ª–≥–æ—Ç–∞)
- –í–∏–¥–∂–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–≥–æ–¥—ã –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞
- –¢–∞–±–ª–∏—Ü—É –≥–æ—Ä–æ–¥–æ–≤ —Å –ø–æ–∏—Å–∫–æ–º —á–µ—Ä–µ–∑ AJAX
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å OpenWeatherMap API

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### ‚úÖ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å
- –°–æ–∑–¥–∞–Ω–∏–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–æ–≤
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö

### ‚úÖ –§—Ä–æ–Ω—Ç–µ–Ω–¥
- –í–∏–¥–∂–µ—Ç –ø–æ–≥–æ–¥—ã —Å –≤—ã–±–æ—Ä–æ–º –≥–æ—Ä–æ–¥–∞
- –¢–∞–±–ª–∏—Ü–∞ –≤—Å–µ—Ö –≥–æ—Ä–æ–¥–æ–≤ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
- AJAX –ø–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—è–º –≥–æ—Ä–æ–¥–æ–≤

### ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ API –∑–∞–ø—Ä–æ—Å–æ–≤ (1 —á–∞—Å)
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ë–î
- –ò–Ω–¥–µ–∫—Å—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- WordPress 5.0+
- PHP 7.4+
- –¢–µ–º–∞ Storefront
- API –∫–ª—é—á OpenWeatherMap

### –í–∞—Ä–∏–∞–Ω—Ç 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ —Ä–µ–ª–∏–∑ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π)

1. **–°–∫–∞—á–∞–π—Ç–µ —Ä–µ–ª–∏–∑:**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ [Releases](https://github.com/Stix5ni/TestWork77601/releases)
   - –°–∫–∞—á–∞–π—Ç–µ `.zip` –¥–ª—è –≤–µ—Ä—Å–∏–∏ v1.0.0
   - –†–∞—Å–ø–∞–∫—É–π—Ç–µ –∞—Ä—Ö–∏–≤ –≤ `/wp-content/themes/storefront-child`

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫—É—é —Ç–µ–º—É Storefront:**
   ```bash
   # –í –∞–¥–º–∏–Ω–∫–µ WordPress:
   –í–Ω–µ—à–Ω–∏–π –≤–∏–¥ ‚Üí –¢–µ–º—ã ‚Üí –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é ‚Üí –ü–æ–∏—Å–∫ "Storefront" ‚Üí –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å ‚Üí –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å
   ```

3. **–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –¥–æ—á–µ—Ä–Ω—é—é —Ç–µ–º—É:**
   ```bash
   # –í –∞–¥–º–∏–Ω–∫–µ:
   –í–Ω–µ—à–Ω–∏–π –≤–∏–¥ ‚Üí –¢–µ–º—ã ‚Üí Storefront Child ‚Üí –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å
   ```

4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ API-–∫–ª—é—á:**

   –û—Ç–∫—Ä–æ–π—Ç–µ `wp-config.php` –≤ –∫–æ—Ä–Ω–µ WordPress –∏ –¥–æ–±–∞–≤—å—Ç–µ:
   ```php
   define('OPENWEATHER_API_KEY', 'api-–∫–ª—é—á');
   ```

   –ó–∞–º–µ–Ω–∏—Ç–µ `api-–∫–ª—é—á` –Ω–∞ –∫–ª—é—á –æ—Ç [OpenWeatherMap](https://openweathermap.org/api)

### –í–∞—Ä–∏–∞–Ω—Ç 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ Git

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
   ```bash
   git clone https://github.com/Stix5ni/TestWork77601.git
   cd TestWork77601
   ```

2. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤ –ø–∞–ø–∫—É —Ç–µ–º:**
   ```bash
   cp -r . /–ø—É—Ç—å/–∫/wordpress/wp-content/themes/storefront-child
   ```

3. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫—É—é —Ç–µ–º—É Storefront:**
   ```bash
   # –ß–µ—Ä–µ–∑ WordPress –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
   –í–Ω–µ—à–Ω–∏–π –≤–∏–¥ ‚Üí –¢–µ–º—ã ‚Üí –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é ‚Üí –ü–æ–∏—Å–∫ "Storefront" ‚Üí –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å ‚Üí –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å
   ```

4. **–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –¥–æ—á–µ—Ä–Ω—é—é —Ç–µ–º—É:**
   ```bash
   # –í –∞–¥–º–∏–Ω–∫–µ:
   –í–Ω–µ—à–Ω–∏–π –≤–∏–¥ ‚Üí –¢–µ–º—ã ‚Üí Storefront Child ‚Üí –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å
   ```

5. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ API –∫–ª—é—á:**

   –î–æ–±–∞–≤—å—Ç–µ –≤ `wp-config.php`:
   ```php
   define('OPENWEATHER_API_KEY', 'api-–∫–ª—é—á');
   ```

   –ü–æ–ª—É—á–∏—Ç—å –∫–ª—é—á: [OpenWeatherMap API](https://openweathermap.org/api)

## üìñ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–æ–≤
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ `–ì–æ—Ä–æ–¥–∞ ‚Üí –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π`
2. –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞
3. –£–∫–∞–∂–∏—Ç–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (—à–∏—Ä–æ—Ç–∞: -90..90, –¥–æ–ª–≥–æ—Ç–∞: -180..180)
4. –í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—É –∏–∑ —Å–ø–∏—Å–∫–∞
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–∏–¥–∂–µ—Ç–∞
1. `–í–Ω–µ—à–Ω–∏–π –≤–∏–¥ ‚Üí –í–∏–¥–∂–µ—Ç—ã`
2. –ù–∞–π–¥–∏—Ç–µ –≤–∏–¥–∂–µ—Ç "City Weather"
3. –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –≤ –Ω—É–∂–Ω—É—é –æ–±–ª–∞—Å—Ç—å
4. –í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥ –∏–∑ –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ —Å–ø–∏—Å–∫–∞
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

### 3. –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å —Ç–∞–±–ª–∏—Ü–µ–π –≥–æ—Ä–æ–¥–æ–≤
1. `–°—Ç—Ä–∞–Ω–∏—Ü—ã ‚Üí –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é`
2. –í –∞—Ç—Ä–∏–±—É—Ç–∞—Ö —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤—ã–±–µ—Ä–∏—Ç–µ —à–∞–±–ª–æ–Ω "Cities Table"
3. –û–ø—É–±–ª–∏–∫—É–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É

### 4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ö—É–∫–æ–≤
```php
// –î–æ —Ç–∞–±–ª–∏—Ü—ã –≥–æ—Ä–æ–¥–æ–≤
add_action('before_cities_table', function() {
    echo '<p>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–µ—Ä–µ–¥ —Ç–∞–±–ª–∏—Ü–µ–π</p>';
});

// –ü–æ—Å–ª–µ —Ç–∞–±–ª–∏—Ü—ã –≥–æ—Ä–æ–¥–æ–≤  
add_action('after_cities_table', function() {
    echo '<p>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ—Å–ª–µ —Ç–∞–±–ª–∏—Ü—ã</p>';
});
```

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
```
storefront-child/
‚îú‚îÄ‚îÄ functions.php           # –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
‚îú‚îÄ‚îÄ style.css              # –°—Ç–∏–ª–∏ –¥–æ—á–µ—Ä–Ω–µ–π —Ç–µ–º—ã
‚îú‚îÄ‚îÄ template-cities-table.php  # –®–∞–±–ª–æ–Ω —Ç–∞–±–ª–∏—Ü—ã –≥–æ—Ä–æ–¥–æ–≤
‚îú‚îÄ‚îÄ js/
‚îÇ   ‚îî‚îÄ‚îÄ ajax-search.js     # AJAX –ø–æ–∏—Å–∫ –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏—è
‚îî‚îÄ‚îÄ inc/
    ‚îú‚îÄ‚îÄ cpt-cities.php     # Custom Post Type
    ‚îú‚îÄ‚îÄ taxonomy-countries.php  # Custom Taxonomy  
    ‚îú‚îÄ‚îÄ metabox-cities.php # –ú–µ—Ç–∞–±–æ–∫—Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
    ‚îú‚îÄ‚îÄ widget-city-weather.php # –í–∏–¥–∂–µ—Ç –ø–æ–≥–æ–¥—ã
    ‚îú‚îÄ‚îÄ ajax-search.php    # AJAX –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
    ‚îî‚îÄ‚îÄ helpers.php        # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- `idx_post_title` –Ω–∞ `wp_posts.post_title`
- `idx_meta_key` –Ω–∞ `wp_postmeta.meta_key`
- `idx_taxonomy` –Ω–∞ `wp_term_taxonomy.taxonomy`

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- **API –ø–æ–≥–æ–¥—ã**: 1 —á–∞—Å (—É—Å–ø–µ—à–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã), 5 –º–∏–Ω—É—Ç (–æ—à–∏–±–∫–∏)
- **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ë–î**: 1 —á–∞—Å
- **–ü–æ–∏—Å–∫ AJAX**: 5 –º–∏–Ω—É—Ç

### –•—É–∫–∏ –∏ —Ñ–∏–ª—å—Ç—Ä—ã
- `before_cities_table` - –¥–æ —Ç–∞–±–ª–∏—Ü—ã –≥–æ—Ä–æ–¥–æ–≤
- `after_cities_table` - –ø–æ—Å–ª–µ —Ç–∞–±–ª–∏—Ü—ã –≥–æ—Ä–æ–¥–æ–≤

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### API –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å API –∫–ª—é—á–∞ –≤ `wp-config.php`
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `wp-content/debug.log`

### –ú–µ–¥–ª–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ç–∞–±–ª–∏—Ü—ã
1. –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à: `wp transient delete --all`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–∑–¥–∞–ª–∏—Å—å –ª–∏ –∏–Ω–¥–µ–∫—Å—ã –ë–î

## –ê–≤—Ç–æ—Ä

- GitHub: [@Stix5ni](https://github.com/Stix5ni)
- Email: maxim.in.zel@gmail.com
